<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>光华酿造-注册</title>
    <link rel="stylesheet" href="../../public/front/css/register.css">
    <style>
        
    </style>
</head>

<body>
    <!-- header start -->
        <div id="header">
                <div class="h_title">
                    <h2>光华酿造</h2>
                    <a href="">
                        <img class="img" src="../../public/front/image/mi-logo.png" alt="" style="width:60px;" height="50px;">
                    </a>
                </div>
        </div>
    <!-- header end -->
    <!-- main start -->
        <div id="main">
            <!-- <a href=""><img src="../image/QQ图片20181120153618.jpg" style="" alt=""></a> -->
            <div class="m_login">
                <div class="m_headr">
                    <form id="form1" onsubmit="return false" action="##" method="post">
                    <h2>账号注册</h2>
                    <div class="mark">注册成功</div>
                    <div class="m_user">
                    <input class="name" name="username" type="text" placeholder="用户名">
                    <p class="p_name"></p>
                    <input class="phone_number" name="phone_number" type="text" placeholder="手机号码">
                    <p class="p_number"></p>
                    <input class="email" name="email" type="text" placeholder="邮箱">
                    <p class="p_email"></p>
                    <input class="pwd" name="password" type="password" placeholder="密码">
                    <p class="p_pwd"></p>
                    <input class="confirmpassword" name="confirmpassword" type="password" placeholder="确认密码"">
                    <p class="p_confirm"></p>
                    </div>
                    <span><?php $msg?></span>
                    <button class="log" onclick="login()">注册</button>
                    </form>
                    <div class="user_top">
                    <div class="zhuce">
                        <a href="../../front/user/login.php" class="zhuce_liji">
                            <span>立即登录 |</span>
                        </a>
                        <a href="" class="wang">
                            <span>忘记密码?</span>
                        </a>
                    </div>
                 </div>
                </div>
            </div>
        </div>
    <!-- main end -->
    <script>
        function login(data) {
            var name = $("input[name='username']").val();
            var phone_number = $("input[name ='phone_number']").val();
            var p_email = $("input[name = 'email']").val();
            var p_pwd =  $("input[name='password']").val();
            $.post("../../front/user/register.php",{
            //几个参数需要注意一下
                dataType: "json",//预期服务器返回的数据类型
                "username":name,
                "phone_number":phone_number,
                "email":p_email,
                "password":p_pwd,  
            },function(data){
                let email=/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/;
                let password=/^[0-9a-zA-Z_@.?`~#%^&*()+='/|;<>,!-]{6,16}$/;
                let use= /^[0-9a-zA-Z_.]{1,18}$/;
                let tel=/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/;
                var login_name = $("#main .m_login .m_headr .m_user .name");
                var login_pwd = $("#main .m_login .m_headr .m_user .pwd");
                var phone_number = $("#main .m_login .m_headr .m_user .phone_number");
                var confirmpassword = $("#main .m_login .m_headr .m_user .confirmpassword");
                var email_login =  $("#main .m_login .m_headr .m_user .email");
                var btn_name = $("#main .m_login .m_headr button");
                var p_name = $("#main .m_login .m_headr .m_user .p_name")[0];
                var p_pwd = $("#main .m_login .m_headr .m_user .p_pwd")[0];
                var p_number = $("#main .m_login .m_headr .m_user .p_number")[0];
                var p_confirmpassword = $("#main .m_login .m_headr .m_user .p_confirm")[0];
                var p_email = $("#main .m_login .m_headr .m_user .p_email")[0];
                if($("input[name='username']").val()==""){
                    p_name.innerHTML = "用户名不能为空！";
                    return;
                }
                if($("input[name='password']").val()==""){
                    p_pwd.innerHTML = "密码不能为空！";
                    return;
                }
                if($("input[name='phone_number']").val()==""){
                    p_number.innerHTML = "电话号码不能为空！";
                    return;
                }
                if($("input[name='email']").val()==""){
                    p_email.innerHTML = "邮箱不能为空！";
                    return;
                }
                if(password.test(this.value) === false){
                    p_pwd.innerHTML = "密码格式不正确！";
                    return;
                }
                if(confirmpassword.val() !== login_pwd.val()){
                    p_confirmpassword.innerHTML = "用户密码与确认密码不相同！";
                    return;
                }

                if($("input[name='confirmpassword']").val()==""){
                    p_confirmpassword.innerHTML = "确认密码不能为空！";
                    return;
                }
                $("#main .m_login .m_headr .mark").fadeToggle(2000);
                var t1 = window.setTimeout(afn,1000);
                function afn(){
                    $("#main .m_login .m_headr .mark").fadeToggle(2000);
                }                 



                $("input[name='username']").val("");
                $("input[name ='phone_number']").val("");
                $("input[name = 'email']").val("");
                $("input[name='password']").val("");
                $("input[name='confirmpassword']").val("");
            });
        }
    </script>
       <script src="../../public/front/js/jquery-3.3.1.js"></script>
    <script src="../../public/front/js/register.js"></script>
    
    <!-- footer -->
</body>
</html>